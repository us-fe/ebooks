import{_ as n,d as s}from"./app.a957722f.js";const a={},e=s(`<h1 id="you-don-t-know-js-types-grammar" tabindex="-1"><a class="header-anchor" href="#you-don-t-know-js-types-grammar" aria-hidden="true">#</a> You Don&#39;t Know JS: Types &amp; Grammar</h1><h1 id="chapter-2-values" tabindex="-1"><a class="header-anchor" href="#chapter-2-values" aria-hidden="true">#</a> Chapter 2: Values</h1><p><code>array</code>s, <code>string</code>s, and <code>number</code>s are the most basic building-blocks of any program, but JavaScript has some unique characteristics with these types that may either delight or confound you.</p><p>Let&#39;s look at several of the built-in value types in JS, and explore how we can more fully understand and correctly leverage their behaviors.</p><h2 id="arrays" tabindex="-1"><a class="header-anchor" href="#arrays" aria-hidden="true">#</a> Arrays</h2><p>As compared to other type-enforced languages, JavaScript <code>array</code>s are just containers for any type of value, from <code>string</code> to <code>number</code> to <code>object</code> to even another <code>array</code> (which is how you get multidimensional <code>array</code>s).</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>		<span class="token comment">// 3</span>
a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You don&#39;t need to presize your <code>array</code>s (see &quot;Arrays&quot; in Chapter 3), you can just declare them and add values as you see fit:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>	<span class="token comment">// 0</span>

a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>	<span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Warning:</strong> Using <code>delete</code> on an <code>array</code> value will remove that slot from the <code>array</code>, but even if you remove the final element, it does <strong>not</strong> update the <code>length</code> property, so be careful! We&#39;ll cover the <code>delete</code> operator itself in more detail in Chapter 5.</p><p>Be careful about creating &quot;sparse&quot; <code>array</code>s (leaving or creating empty/missing slots):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// no \`a[1]\` slot set here</span>
a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>		<span class="token comment">// undefined</span>

a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>	<span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>While that works, it can lead to some confusing behavior with the &quot;empty slots&quot; you leave in between. While the slot appears to have the <code>undefined</code> value in it, it will not behave the same as if the slot is explicitly set (<code>a[1] = undefined</code>). See &quot;Arrays&quot; in Chapter 3 for more information.</p><p><code>array</code>s are numerically indexed (as you&#39;d expect), but the tricky thing is that they also are objects that can have <code>string</code> keys/properties added to them (but which don&#39;t count toward the <code>length</code> of the <code>array</code>):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span><span class="token string">&quot;foobar&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>		<span class="token comment">// 1</span>
a<span class="token punctuation">[</span><span class="token string">&quot;foobar&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">// 2</span>
a<span class="token punctuation">.</span>foobar<span class="token punctuation">;</span>		<span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>However, a gotcha to be aware of is that if a <code>string</code> value intended as a key can be coerced to a standard base-10 <code>number</code>, then it is assumed that you wanted to use it as a <code>number</code> index rather than as a <code>string</code> key!</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

a<span class="token punctuation">[</span><span class="token string">&quot;13&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 14</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Generally, it&#39;s not a great idea to add <code>string</code> keys/properties to <code>array</code>s. Use <code>object</code>s for holding values in keys/properties, and save <code>array</code>s for strictly numerically indexed values.</p><h3 id="array-likes" tabindex="-1"><a class="header-anchor" href="#array-likes" aria-hidden="true">#</a> Array-Likes</h3><p>There will be occasions where you need to convert an <code>array</code>-like value (a numerically indexed collection of values) into a true <code>array</code>, usually so you can call array utilities (like <code>indexOf(..)</code>, <code>concat(..)</code>, <code>forEach(..)</code>, etc.) against the collection of values.</p><p>For example, various DOM query operations return lists of DOM elements that are not true <code>array</code>s but are <code>array</code>-like enough for our conversion purposes. Another common example is when functions expose the <code>arguments</code> (<code>array</code>-like) object (as of ES6, deprecated) to access the arguments as a list.</p><p>One very common way to make such a conversion is to borrow the <code>slice(..)</code> utility against the value:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
	arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token string">&quot;bam&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;baz&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;bar&quot;,&quot;baz&quot;,&quot;bam&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>If <code>slice()</code> is called without any other parameters, as it effectively is in the above snippet, the default values for its parameters have the effect of duplicating the <code>array</code> (or, in this case, <code>array</code>-like).</p><p>As of ES6, there&#39;s also a built-in utility called <code>Array.from(..)</code> that can do the same task:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Note:</strong> <code>Array.from(..)</code> has several powerful capabilities, and will be covered in detail in the <em>ES6 &amp; Beyond</em> title of this series.</p><h2 id="strings" tabindex="-1"><a class="header-anchor" href="#strings" aria-hidden="true">#</a> Strings</h2><p>It&#39;s a very common belief that <code>string</code>s are essentially just <code>array</code>s of characters. While the implementation under the covers may or may not use <code>array</code>s, it&#39;s important to realize that JavaScript <code>string</code>s are really not the same as <code>array</code>s of characters. The similarity is mostly just skin-deep.</p><p>For example, let&#39;s consider these two values:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;f&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Strings do have a shallow resemblance to <code>array</code>s -- <code>array</code>-likes, as above -- for instance, both of them having a <code>length</code> property, an <code>indexOf(..)</code> method (<code>array</code> version only as of ES5), and a <code>concat(..)</code> method:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>							<span class="token comment">// 3</span>
b<span class="token punctuation">.</span>length<span class="token punctuation">;</span>							<span class="token comment">// 3</span>

a<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> <span class="token string">&quot;o&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">// 1</span>
b<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> <span class="token string">&quot;o&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">// 1</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// &quot;foobar&quot;</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// [&quot;f&quot;,&quot;o&quot;,&quot;o&quot;,&quot;b&quot;,&quot;a&quot;,&quot;r&quot;]</span>

a <span class="token operator">===</span> c<span class="token punctuation">;</span>							<span class="token comment">// false</span>
b <span class="token operator">===</span> d<span class="token punctuation">;</span>							<span class="token comment">// false</span>

a<span class="token punctuation">;</span>									<span class="token comment">// &quot;foo&quot;</span>
b<span class="token punctuation">;</span>									<span class="token comment">// [&quot;f&quot;,&quot;o&quot;,&quot;o&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>So, they&#39;re both basically just &quot;arrays of characters&quot;, right? <strong>Not exactly</strong>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">;</span>
b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// &quot;foo&quot;</span>
b<span class="token punctuation">;</span> <span class="token comment">// [&quot;f&quot;,&quot;O&quot;,&quot;o&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>JavaScript <code>string</code>s are immutable, while <code>array</code>s are quite mutable. Moreover, the <code>a[1]</code> character position access form was not always widely valid JavaScript. Older versions of IE did not allow that syntax (but now they do). Instead, the <em>correct</em> approach has been <code>a.charAt(1)</code>.</p><p>A further consequence of immutable <code>string</code>s is that none of the <code>string</code> methods that alter its contents can modify in-place, but rather must create and return new <code>string</code>s. By contrast, many of the methods that change <code>array</code> contents actually <em>do</em> modify in-place.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>c <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token operator">===</span> c<span class="token punctuation">;</span>	<span class="token comment">// false</span>
a<span class="token punctuation">;</span>			<span class="token comment">// &quot;foo&quot;</span>
c<span class="token punctuation">;</span>			<span class="token comment">// &quot;FOO&quot;</span>

b<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token string">&quot;!&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">;</span>			<span class="token comment">// [&quot;f&quot;,&quot;O&quot;,&quot;o&quot;,&quot;!&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Also, many of the <code>array</code> methods that could be helpful when dealing with <code>string</code>s are not actually available for them, but we can &quot;borrow&quot; non-mutation <code>array</code> methods against our <code>string</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>a<span class="token punctuation">.</span>join<span class="token punctuation">;</span>			<span class="token comment">// undefined</span>
a<span class="token punctuation">.</span>map<span class="token punctuation">;</span>			<span class="token comment">// undefined</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> v<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

c<span class="token punctuation">;</span>				<span class="token comment">// &quot;f-o-o&quot;</span>
d<span class="token punctuation">;</span>				<span class="token comment">// &quot;F.O.O.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Let&#39;s take another example: reversing a <code>string</code> (incidentally, a common JavaScript interview trivia question!). <code>array</code>s have a <code>reverse()</code> in-place mutator method, but <code>string</code>s do not:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>a<span class="token punctuation">.</span>reverse<span class="token punctuation">;</span>		<span class="token comment">// undefined</span>

b<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// [&quot;!&quot;,&quot;o&quot;,&quot;O&quot;,&quot;f&quot;]</span>
b<span class="token punctuation">;</span>				<span class="token comment">// [&quot;!&quot;,&quot;o&quot;,&quot;O&quot;,&quot;f&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Unfortunately, this &quot;borrowing&quot; doesn&#39;t work with <code>array</code> mutators, because <code>string</code>s are immutable and thus can&#39;t be modified in place:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// still returns a String object wrapper (see Chapter 3)</span>
<span class="token comment">// for &quot;foo&quot; :(</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Another workaround (aka hack) is to convert the <code>string</code> into an <code>array</code>, perform the desired operation, then convert it back to a <code>string</code>.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> c <span class="token operator">=</span> a
	<span class="token comment">// split \`a\` into an array of characters</span>
	<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">)</span>
	<span class="token comment">// reverse the array of characters</span>
	<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// join the array of characters back to a string</span>
	<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

c<span class="token punctuation">;</span> <span class="token comment">// &quot;oof&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>If that feels ugly, it is. Nevertheless, <em>it works</em> for simple <code>string</code>s, so if you need something quick-n-dirty, often such an approach gets the job done.</p><p><strong>Warning:</strong> Be careful! This approach <strong>doesn&#39;t work</strong> for <code>string</code>s with complex (unicode) characters in them (astral symbols, multibyte characters, etc.). You need more sophisticated library utilities that are unicode-aware for such operations to be handled accurately. Consult Mathias Bynens&#39; work on the subject: <em>Esrever</em> (https://github.com/mathiasbynens/esrever).</p><p>The other way to look at this is: if you are more commonly doing tasks on your &quot;strings&quot; that treat them as basically <em>arrays of characters</em>, perhaps it&#39;s better to just actually store them as <code>array</code>s rather than as <code>string</code>s. You&#39;ll probably save yourself a lot of hassle of converting from <code>string</code> to <code>array</code> each time. You can always call <code>join(&quot;&quot;)</code> on the <code>array</code> <em>of characters</em> whenever you actually need the <code>string</code> representation.</p><h2 id="numbers" tabindex="-1"><a class="header-anchor" href="#numbers" aria-hidden="true">#</a> Numbers</h2><p>JavaScript has just one numeric type: <code>number</code>. This type includes both &quot;integer&quot; values and fractional decimal numbers. I say &quot;integer&quot; in quotes because it&#39;s long been a criticism of JS that there are not true integers, as there are in other languages. That may change at some point in the future, but for now, we just have <code>number</code>s for everything.</p><p>So, in JS, an &quot;integer&quot; is just a value that has no fractional decimal value. That is, <code>42.0</code> is as much an &quot;integer&quot; as <code>42</code>.</p><p>Like most modern languages, including practically all scripting languages, the implementation of JavaScript&#39;s <code>number</code>s is based on the &quot;IEEE 754&quot; standard, often called &quot;floating-point.&quot; JavaScript specifically uses the &quot;double precision&quot; format (aka &quot;64-bit binary&quot;) of the standard.</p><p>There are many great write-ups on the Web about the nitty-gritty details of how binary floating-point numbers are stored in memory, and the implications of those choices. Because understanding bit patterns in memory is not strictly necessary to understand how to correctly use <code>number</code>s in JS, we&#39;ll leave it as an exercise for the interested reader if you&#39;d like to dig further into IEEE 754 details.</p><h3 id="numeric-syntax" tabindex="-1"><a class="header-anchor" href="#numeric-syntax" aria-hidden="true">#</a> Numeric Syntax</h3><p>Number literals are expressed in JavaScript generally as base-10 decimal literals. For example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">42.3</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The leading portion of a decimal value, if <code>0</code>, is optional:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0.42</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">.42</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Similarly, the trailing portion (the fractional) of a decimal value after the <code>.</code>, if <code>0</code>, is optional:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42.0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">42.</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Warning:</strong> <code>42.</code> is pretty uncommon, and probably not a great idea if you&#39;re trying to avoid confusion when other people read your code. But it is, nevertheless, valid.</p><p>By default, most <code>number</code>s will be outputted as base-10 decimals, with trailing fractional <code>0</code>s removed. So:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42.300</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">42.0</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// 42.3</span>
b<span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Very large or very small <code>number</code>s will by default be outputted in exponent form, the same as the output of the <code>toExponential()</code> method, like:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">5E10</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span>					<span class="token comment">// 50000000000</span>
a<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;5e+10&quot;</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> a <span class="token operator">*</span> a<span class="token punctuation">;</span>
b<span class="token punctuation">;</span>					<span class="token comment">// 2.5e+21</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> a<span class="token punctuation">;</span>
c<span class="token punctuation">;</span>					<span class="token comment">// 2e-11</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Because <code>number</code> values can be boxed with the <code>Number</code> object wrapper (see Chapter 3), <code>number</code> values can access methods that are built into the <code>Number.prototype</code> (see Chapter 3). For example, the <code>toFixed(..)</code> method allows you to specify how many fractional decimal places you&#39;d like the value to be represented with:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42.59</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;43&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.6&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.59&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.590&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.5900&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Notice that the output is actually a <code>string</code> representation of the <code>number</code>, and that the value is <code>0</code>-padded on the right-hand side if you ask for more decimals than the value holds.</p><p><code>toPrecision(..)</code> is similar, but specifies how many <em>significant digits</em> should be used to represent the value:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42.59</span><span class="token punctuation">;</span>

a<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;4e+1&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;43&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.6&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.59&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.590&quot;</span>
a<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span> <span class="token number">6</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.5900&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>You don&#39;t have to use a variable with the value in it to access these methods; you can access these methods directly on <code>number</code> literals. But you have to be careful with the <code>.</code> operator. Since <code>.</code> is a valid numeric character, it will first be interpreted as part of the <code>number</code> literal, if possible, instead of being interpreted as a property accessor.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// invalid syntax:</span>
<span class="token number">42.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// SyntaxError</span>

<span class="token comment">// these are all valid:</span>
<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;42.000&quot;</span>
<span class="token number">0.42</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;0.420&quot;</span>
<span class="token number">42.</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// &quot;42.000&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>42.toFixed(3)</code> is invalid syntax, because the <code>.</code> is swallowed up as part of the <code>42.</code> literal (which is valid -- see above!), and so then there&#39;s no <code>.</code> property operator present to make the <code>.toFixed</code> access.</p><p><code>42..toFixed(3)</code> works because the first <code>.</code> is part of the <code>number</code> and the second <code>.</code> is the property operator. But it probably looks strange, and indeed it&#39;s very rare to see something like that in actual JavaScript code. In fact, it&#39;s pretty uncommon to access methods directly on any of the primitive values. Uncommon doesn&#39;t mean <em>bad</em> or <em>wrong</em>.</p><p><strong>Note:</strong> There are libraries that extend the built-in <code>Number.prototype</code> (see Chapter 3) to provide extra operations on/with <code>number</code>s, and so in those cases, it&#39;s perfectly valid to use something like <code>10..makeItRain()</code> to set off a 10-second money raining animation, or something else silly like that.</p><p>This is also technically valid (notice the space):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">42</span> <span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;42.000&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>However, with the <code>number</code> literal specifically, <strong>this is particularly confusing coding style</strong> and will serve no other purpose but to confuse other developers (and your future self). Avoid it.</p><p><code>number</code>s can also be specified in exponent form, which is common when representing larger <code>number</code>s, such as:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> onethousand <span class="token operator">=</span> <span class="token number">1E3</span><span class="token punctuation">;</span>						<span class="token comment">// means 1 * 10^3</span>
<span class="token keyword">var</span> onemilliononehundredthousand <span class="token operator">=</span> <span class="token number">1.1E6</span><span class="token punctuation">;</span>	<span class="token comment">// means 1.1 * 10^6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>number</code> literals can also be expressed in other bases, like binary, octal, and hexadecimal.</p><p>These formats work in current versions of JavaScript:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0xf3</span><span class="token punctuation">;</span> <span class="token comment">// hexadecimal for: 243</span>
<span class="token number">0Xf3</span><span class="token punctuation">;</span> <span class="token comment">// ditto</span>

<span class="token number">0363</span><span class="token punctuation">;</span> <span class="token comment">// octal for: 243</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Note:</strong> Starting with ES6 + <code>strict</code> mode, the <code>0363</code> form of octal literals is no longer allowed (see below for the new form). The <code>0363</code> form is still allowed in non-<code>strict</code> mode, but you should stop using it anyway, to be future-friendly (and because you should be using <code>strict</code> mode by now!).</p><p>As of ES6, the following new forms are also valid:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0o363</span><span class="token punctuation">;</span>		<span class="token comment">// octal for: 243</span>
<span class="token number">0O363</span><span class="token punctuation">;</span>		<span class="token comment">// ditto</span>

<span class="token number">0b11110011</span><span class="token punctuation">;</span>	<span class="token comment">// binary for: 243</span>
<span class="token number">0B11110011</span><span class="token punctuation">;</span> <span class="token comment">// ditto</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Please do your fellow developers a favor: never use the <code>0O363</code> form. <code>0</code> next to capital <code>O</code> is just asking for confusion. Always use the lowercase predicates <code>0x</code>, <code>0b</code>, and <code>0o</code>.</p><h3 id="small-decimal-values" tabindex="-1"><a class="header-anchor" href="#small-decimal-values" aria-hidden="true">#</a> Small Decimal Values</h3><p>The most (in)famous side effect of using binary floating-point numbers (which, remember, is true of <strong>all</strong> languages that use IEEE 754 -- not <em>just</em> JavaScript as many assume/pretend) is:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">===</span> <span class="token number">0.3</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Mathematically, we know that statement should be <code>true</code>. Why is it <code>false</code>?</p><p>Simply put, the representations for <code>0.1</code> and <code>0.2</code> in binary floating-point are not exact, so when they are added, the result is not exactly <code>0.3</code>. It&#39;s <strong>really</strong> close: <code>0.30000000000000004</code>, but if your comparison fails, &quot;close&quot; is irrelevant.</p><p><strong>Note:</strong> Should JavaScript switch to a different <code>number</code> implementation that has exact representations for all values? Some think so. There have been many alternatives presented over the years. None of them have been accepted yet, and perhaps never will. As easy as it may seem to just wave a hand and say, &quot;fix that bug already!&quot;, it&#39;s not nearly that easy. If it were, it most definitely would have been changed a long time ago.</p><p>Now, the question is, if some <code>number</code>s can&#39;t be <em>trusted</em> to be exact, does that mean we can&#39;t use <code>number</code>s at all? <strong>Of course not.</strong></p><p>There are some applications where you need to be more careful, especially when dealing with fractional decimal values. There are also plenty of (maybe most?) applications that only deal with whole numbers (&quot;integers&quot;), and moreover, only deal with numbers in the millions or trillions at maximum. These applications have been, and always will be, <strong>perfectly safe</strong> to use numeric operations in JS.</p><p>What if we <em>did</em> need to compare two <code>number</code>s, like <code>0.1 + 0.2</code> to <code>0.3</code>, knowing that the simple equality test fails?</p><p>The most commonly accepted practice is to use a tiny &quot;rounding error&quot; value as the <em>tolerance</em> for comparison. This tiny value is often called &quot;machine epsilon,&quot; which is commonly <code>2^-52</code> (<code>2.220446049250313e-16</code>) for the kind of <code>number</code>s in JavaScript.</p><p>As of ES6, <code>Number.EPSILON</code> is predefined with this tolerance value, so you&#39;d want to use it, but you can safely polyfill the definition for pre-ES6:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>We can use this <code>Number.EPSILON</code> to compare two <code>number</code>s for &quot;equality&quot; (within the rounding error tolerance):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span>n2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span> n1 <span class="token operator">-</span> n2 <span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>

<span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">// true</span>
<span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span> <span class="token number">0.0000001</span><span class="token punctuation">,</span> <span class="token number">0.0000002</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>The maximum floating-point value that can be represented is roughly <code>1.798e+308</code> (which is really, really, really huge!), predefined for you as <code>Number.MAX_VALUE</code>. On the small end, <code>Number.MIN_VALUE</code> is roughly <code>5e-324</code>, which isn&#39;t negative but is really close to zero!</p><h3 id="safe-integer-ranges" tabindex="-1"><a class="header-anchor" href="#safe-integer-ranges" aria-hidden="true">#</a> Safe Integer Ranges</h3><p>Because of how <code>number</code>s are represented, there is a range of &quot;safe&quot; values for the whole <code>number</code> &quot;integers&quot;, and it&#39;s significantly less than <code>Number.MAX_VALUE</code>.</p><p>The maximum integer that can &quot;safely&quot; be represented (that is, there&#39;s a guarantee that the requested value is actually representable unambiguously) is <code>2^53 - 1</code>, which is <code>9007199254740991</code>. If you insert your commas, you&#39;ll see that this is just over 9 quadrillion. So that&#39;s pretty darn big for <code>number</code>s to range up to.</p><p>This value is actually automatically predefined in ES6, as <code>Number.MAX_SAFE_INTEGER</code>. Unsurprisingly, there&#39;s a minimum value, <code>-9007199254740991</code>, and it&#39;s defined in ES6 as <code>Number.MIN_SAFE_INTEGER</code>.</p><p>The main way that JS programs are confronted with dealing with such large numbers is when dealing with 64-bit IDs from databases, etc. 64-bit numbers cannot be represented accurately with the <code>number</code> type, so must be stored in (and transmitted to/from) JavaScript using <code>string</code> representation.</p><p>Numeric operations on such large ID <code>number</code> values (besides comparison, which will be fine with <code>string</code>s) aren&#39;t all that common, thankfully. But if you <em>do</em> need to perform math on these very large values, for now you&#39;ll need to use a <em>big number</em> utility. Big numbers may get official support in a future version of JavaScript.</p><h3 id="testing-for-integers" tabindex="-1"><a class="header-anchor" href="#testing-for-integers" aria-hidden="true">#</a> Testing for Integers</h3><p>To test if a value is an integer, you can use the ES6-specified <code>Number.isInteger(..)</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span> <span class="token number">42</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span> <span class="token number">42.000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span> <span class="token number">42.3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>To polyfill <code>Number.isInteger(..)</code> for pre-ES6:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isInteger<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span><span class="token function-variable function">isInteger</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">typeof</span> num <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span> num <span class="token operator">%</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>To test if a value is a <em>safe integer</em>, use the ES6-specified <code>Number.isSafeInteger(..)</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function">isSafeInteger</span><span class="token punctuation">(</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isSafeInteger</span><span class="token punctuation">(</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">53</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// false</span>
Number<span class="token punctuation">.</span><span class="token function">isSafeInteger</span><span class="token punctuation">(</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">53</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>To polyfill <code>Number.isSafeInteger(..)</code> in pre-ES6 browsers:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isSafeInteger<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span><span class="token function-variable function">isSafeInteger</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span> num <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
			Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span> num <span class="token punctuation">)</span> <span class="token operator">&lt;=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_32-bit-signed-integers" tabindex="-1"><a class="header-anchor" href="#_32-bit-signed-integers" aria-hidden="true">#</a> 32-bit (Signed) Integers</h3><p>While integers can range up to roughly 9 quadrillion safely (53 bits), there are some numeric operations (like the bitwise operators) that are only defined for 32-bit <code>number</code>s, so the &quot;safe range&quot; for <code>number</code>s used in that way must be much smaller.</p><p>The range then is <code>Math.pow(-2,31)</code> (<code>-2147483648</code>, about -2.1 billion) up to <code>Math.pow(2,31)-1</code> (<code>2147483647</code>, about +2.1 billion).</p><p>To force a <code>number</code> value in <code>a</code> to a 32-bit signed integer value, use <code>a | 0</code>. This works because the <code>|</code> bitwise operator only works for 32-bit integer values (meaning it can only pay attention to 32 bits and any other bits will be lost). Then, &quot;or&#39;ing&quot; with zero is essentially a no-op bitwise speaking.</p><p><strong>Note:</strong> Certain special values (which we will cover in the next section) such as <code>NaN</code> and <code>Infinity</code> are not &quot;32-bit safe,&quot; in that those values when passed to a bitwise operator will pass through the abstract operation <code>ToInt32</code> (see Chapter 4) and become simply the <code>+0</code> value for the purpose of that bitwise operation.</p><h2 id="special-values" tabindex="-1"><a class="header-anchor" href="#special-values" aria-hidden="true">#</a> Special Values</h2><p>There are several special values spread across the various types that the <em>alert</em> JS developer needs to be aware of, and use properly.</p><h3 id="the-non-value-values" tabindex="-1"><a class="header-anchor" href="#the-non-value-values" aria-hidden="true">#</a> The Non-value Values</h3><p>For the <code>undefined</code> type, there is one and only one value: <code>undefined</code>. For the <code>null</code> type, there is one and only one value: <code>null</code>. So for both of them, the label is both its type and its value.</p><p>Both <code>undefined</code> and <code>null</code> are often taken to be interchangeable as either &quot;empty&quot; values or &quot;non&quot; values. Other developers prefer to distinguish between them with nuance. For example:</p><ul><li><code>null</code> is an empty value</li><li><code>undefined</code> is a missing value</li></ul><p>Or:</p><ul><li><code>undefined</code> hasn&#39;t had a value yet</li><li><code>null</code> had a value and doesn&#39;t anymore</li></ul><p>Regardless of how you choose to &quot;define&quot; and use these two values, <code>null</code> is a special keyword, not an identifier, and thus you cannot treat it as a variable to assign to (why would you!?). However, <code>undefined</code> <em>is</em> (unfortunately) an identifier. Uh oh.</p><h3 id="undefined" tabindex="-1"><a class="header-anchor" href="#undefined" aria-hidden="true">#</a> Undefined</h3><p>In non-<code>strict</code> mode, it&#39;s actually possible (though incredibly ill-advised!) to assign a value to the globally provided <code>undefined</code> identifier:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// really bad idea!</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// TypeError!</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>In both non-<code>strict</code> mode and <code>strict</code> mode, however, you can create a local variable of the name <code>undefined</code>. But again, this is a terrible idea!</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Friends don&#39;t let friends override <code>undefined</code>.</strong> Ever.</p><h4 id="void-operator" tabindex="-1"><a class="header-anchor" href="#void-operator" aria-hidden="true">#</a> <code>void</code> Operator</h4><p>While <code>undefined</code> is a built-in identifier that holds (unless modified -- see above!) the built-in <code>undefined</code> value, another way to get this value is the <code>void</code> operator.</p><p>The expression <code>void ___</code> &quot;voids&quot; out any value, so that the result of the expression is always the <code>undefined</code> value. It doesn&#39;t modify the existing value; it just ensures that no value comes back from the operator expression.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">void</span> a<span class="token punctuation">,</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>By convention (mostly from C-language programming), to represent the <code>undefined</code> value stand-alone by using <code>void</code>, you&#39;d use <code>void 0</code> (though clearly even <code>void true</code> or any other <code>void</code> expression does the same thing). There&#39;s no practical difference between <code>void 0</code>, <code>void 1</code>, and <code>undefined</code>.</p><p>But the <code>void</code> operator can be useful in a few other circumstances, if you need to ensure that an expression has no result value (even if it has side effects).</p><p>For example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// note: \`APP.ready\` is provided by our application</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">APP</span><span class="token punctuation">.</span>ready<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// try again later</span>
		<span class="token keyword">return</span> <span class="token keyword">void</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span> doSomething<span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> result<span class="token punctuation">;</span>

	<span class="token comment">// do some other stuff</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// were we able to do it right away?</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// handle next tasks right away</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Here, the <code>setTimeout(..)</code> function returns a numeric value (the unique identifier of the timer interval, if you wanted to cancel it), but we want to <code>void</code> that out so that the return value of our function doesn&#39;t give a false-positive with the <code>if</code> statement.</p><p>Many devs prefer to just do these actions separately, which works the same but doesn&#39;t use the <code>void</code> operator:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">APP</span><span class="token punctuation">.</span>ready<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// try again later</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span> doSomething<span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>In general, if there&#39;s ever a place where a value exists (from some expression) and you&#39;d find it useful for the value to be <code>undefined</code> instead, use the <code>void</code> operator. That probably won&#39;t be terribly common in your programs, but in the rare cases you do need it, it can be quite helpful.</p><h3 id="special-numbers" tabindex="-1"><a class="header-anchor" href="#special-numbers" aria-hidden="true">#</a> Special Numbers</h3><p>The <code>number</code> type includes several special values. We&#39;ll take a look at each in detail.</p><h4 id="the-not-number-number" tabindex="-1"><a class="header-anchor" href="#the-not-number-number" aria-hidden="true">#</a> The Not Number, Number</h4><p>Any mathematic operation you perform without both operands being <code>number</code>s (or values that can be interpreted as regular <code>number</code>s in base 10 or base 16) will result in the operation failing to produce a valid <code>number</code>, in which case you will get the <code>NaN</code> value.</p><p><code>NaN</code> literally stands for &quot;not a <code>number</code>&quot;, though this label/description is very poor and misleading, as we&#39;ll see shortly. It would be much more accurate to think of <code>NaN</code> as being &quot;invalid number,&quot; &quot;failed number,&quot; or even &quot;bad number,&quot; than to think of it as &quot;not a number.&quot;</p><p>For example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>		<span class="token comment">// NaN</span>

<span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>In other words: &quot;the type of not-a-number is &#39;number&#39;!&quot; Hooray for confusing names and semantics.</p><p><code>NaN</code> is a kind of &quot;sentinel value&quot; (an otherwise normal value that&#39;s assigned a special meaning) that represents a special kind of error condition within the <code>number</code> set. The error condition is, in essence: &quot;I tried to perform a mathematic operation but failed, so here&#39;s the failed <code>number</code> result instead.&quot;</p><p>So, if you have a value in some variable and want to test to see if it&#39;s this special failed-number <code>NaN</code>, you might think you could directly compare to <code>NaN</code> itself, as you can with any other value, like <code>null</code> or <code>undefined</code>. Nope.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>

a <span class="token operator">==</span> <span class="token number">NaN</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
a <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>NaN</code> is a very special value in that it&#39;s never equal to another <code>NaN</code> value (i.e., it&#39;s never equal to itself). It&#39;s the only value, in fact, that is not reflexive (without the Identity characteristic <code>x === x</code>). So, <code>NaN !== NaN</code>. A bit strange, huh?</p><p>So how <em>do</em> we test for it, if we can&#39;t compare to <code>NaN</code> (since that comparison would always fail)?</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>

<span class="token function">isNaN</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Easy enough, right? We use the built-in global utility called <code>isNaN(..)</code> and it tells us if the value is <code>NaN</code> or not. Problem solved!</p><p>Not so fast.</p><p>The <code>isNaN(..)</code> utility has a fatal flaw. It appears it tried to take the meaning of <code>NaN</code> (&quot;Not a Number&quot;) too literally -- that its job is basically: &quot;test if the thing passed in is either not a <code>number</code> or is a <code>number</code>.&quot; But that&#39;s not quite accurate.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// NaN</span>
b<span class="token punctuation">;</span> <span class="token comment">// &quot;foo&quot;</span>

window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true -- ouch!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Clearly, <code>&quot;foo&quot;</code> is literally <em>not a <code>number</code></em>, but it&#39;s definitely not the <code>NaN</code> value either! This bug has been in JS since the very beginning (over 19 years of <em>ouch</em>).</p><p>As of ES6, finally a replacement utility has been provided: <code>Number.isNaN(..)</code>. A simple polyfill for it so that you can safely check <code>NaN</code> values <em>now</em> even in pre-ES6 browsers is:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isNaN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span><span class="token function-variable function">isNaN</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span>
			window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>

Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false -- phew!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Actually, we can implement a <code>Number.isNaN(..)</code> polyfill even easier, by taking advantage of that peculiar fact that <code>NaN</code> isn&#39;t equal to itself. <code>NaN</code> is the <em>only</em> value in the whole language where that&#39;s true; every other value is always <strong>equal to itself</strong>.</p><p>So:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isNaN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span><span class="token function-variable function">isNaN</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> n <span class="token operator">!==</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Weird, huh? But it works!</p><p><code>NaN</code>s are probably a reality in a lot of real-world JS programs, either on purpose or by accident. It&#39;s a really good idea to use a reliable test, like <code>Number.isNaN(..)</code> as provided (or polyfilled), to recognize them properly.</p><p>If you&#39;re currently using just <code>isNaN(..)</code> in a program, the sad reality is your program <em>has a bug</em>, even if you haven&#39;t been bitten by it yet!</p><h4 id="infinities" tabindex="-1"><a class="header-anchor" href="#infinities" aria-hidden="true">#</a> Infinities</h4><p>Developers from traditional compiled languages like C are probably used to seeing either a compiler error or runtime exception, like &quot;Divide by zero,&quot; for an operation like:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>However, in JS, this operation is well-defined and results in the value <code>Infinity</code> (aka <code>Number.POSITIVE_INFINITY</code>). Unsurprisingly:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// Infinity</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// -Infinity</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>As you can see, <code>-Infinity</code> (aka <code>Number.NEGATIVE_INFINITY</code>) results from a divide-by-zero where either (but not both!) of the divide operands is negative.</p><p>JS uses finite numeric representations (IEEE 754 floating-point, which we covered earlier), so contrary to pure mathematics, it seems it <em>is</em> possible to overflow even with an operation like addition or subtraction, in which case you&#39;d get <code>Infinity</code> or <code>-Infinity</code>.</p><p>For example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span>	<span class="token comment">// 1.7976931348623157e+308</span>
a <span class="token operator">+</span> a<span class="token punctuation">;</span>						<span class="token comment">// Infinity</span>
a <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">970</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// Infinity</span>
a <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">969</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 1.7976931348623157e+308</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>According to the specification, if an operation like addition results in a value that&#39;s too big to represent, the IEEE 754 &quot;round-to-nearest&quot; mode specifies what the result should be. So, in a crude sense, <code>Number.MAX_VALUE + Math.pow( 2, 969 )</code> is closer to <code>Number.MAX_VALUE</code> than to <code>Infinity</code>, so it &quot;rounds down,&quot; whereas <code>Number.MAX_VALUE + Math.pow( 2, 970 )</code> is closer to <code>Infinity</code> so it &quot;rounds up&quot;.</p><p>If you think too much about that, it&#39;s going to make your head hurt. So don&#39;t. Seriously, stop!</p><p>Once you overflow to either one of the <em>infinities</em>, however, there&#39;s no going back. In other words, in an almost poetic sense, you can go from finite to infinite but not from infinite back to finite.</p><p>It&#39;s almost philosophical to ask: &quot;What is infinity divided by infinity&quot;. Our naive brains would likely say &quot;1&quot; or maybe &quot;infinity.&quot; Turns out neither is true. Both mathematically and in JavaScript, <code>Infinity / Infinity</code> is not a defined operation. In JS, this results in <code>NaN</code>.</p><p>But what about any positive finite <code>number</code> divided by <code>Infinity</code>? That&#39;s easy! <code>0</code>. And what about a negative finite <code>number</code> divided by <code>Infinity</code>? Keep reading!</p><h4 id="zeros" tabindex="-1"><a class="header-anchor" href="#zeros" aria-hidden="true">#</a> Zeros</h4><p>While it may confuse the mathematics-minded reader, JavaScript has both a normal zero <code>0</code> (otherwise known as a positive zero <code>+0</code>) <em>and</em> a negative zero <code>-0</code>. Before we explain why the <code>-0</code> exists, we should examine how JS handles it, because it can be quite confusing.</p><p>Besides being specified literally as <code>-0</code>, negative zero also results from certain mathematic operations. For example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Addition and subtraction cannot result in a negative zero.</p><p>A negative zero when examined in the developer console will usually reveal <code>-0</code>, though that was not the common case until fairly recently, so some older browsers you encounter may still report it as <code>0</code>.</p><p>However, if you try to stringify a negative zero value, it will always be reported as <code>&quot;0&quot;</code>, according to the spec.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">// (some browser) consoles at least get it right</span>
a<span class="token punctuation">;</span>							<span class="token comment">// -0</span>

<span class="token comment">// but the spec insists on lying to you!</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// &quot;0&quot;</span>
a <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>						<span class="token comment">// &quot;0&quot;</span>
<span class="token function">String</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// &quot;0&quot;</span>

<span class="token comment">// strangely, even JSON gets in on the deception</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// &quot;0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Interestingly, the reverse operations (going from <code>string</code> to <code>number</code>) don&#39;t lie:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">+</span><span class="token string">&quot;-0&quot;</span><span class="token punctuation">;</span>				<span class="token comment">// -0</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">&quot;-0&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// -0</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span> <span class="token string">&quot;-0&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// -0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Warning:</strong> The <code>JSON.stringify( -0 )</code> behavior of <code>&quot;0&quot;</code> is particularly strange when you observe that it&#39;s inconsistent with the reverse: <code>JSON.parse( &quot;-0&quot; )</code> reports <code>-0</code> as you&#39;d correctly expect.</p><p>In addition to stringification of negative zero being deceptive to hide its true value, the comparison operators are also (intentionally) configured to <em>lie</em>.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>

a <span class="token operator">==</span> b<span class="token punctuation">;</span>		<span class="token comment">// true</span>
<span class="token operator">-</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>

a <span class="token operator">===</span> b<span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token operator">-</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>

<span class="token number">0</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span>		<span class="token comment">// false</span>
a <span class="token operator">&gt;</span> b<span class="token punctuation">;</span>		<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Clearly, if you want to distinguish a <code>-0</code> from a <code>0</code> in your code, you can&#39;t just rely on what the developer console outputs, so you&#39;re going to have to be a bit more clever:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isNegZero</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	n <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> n <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">isNegZero</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>
<span class="token function">isNegZero</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token function">isNegZero</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Now, why do we need a negative zero, besides academic trivia?</p><p>There are certain applications where developers use the magnitude of a value to represent one piece of information (like speed of movement per animation frame) and the sign of that <code>number</code> to represent another piece of information (like the direction of that movement).</p><p>In those applications, as one example, if a variable arrives at zero and it loses its sign, then you would lose the information of what direction it was moving in before it arrived at zero. Preserving the sign of the zero prevents potentially unwanted information loss.</p><h3 id="special-equality" tabindex="-1"><a class="header-anchor" href="#special-equality" aria-hidden="true">#</a> Special Equality</h3><p>As we saw above, the <code>NaN</code> value and the <code>-0</code> value have special behavior when it comes to equality comparison. <code>NaN</code> is never equal to itself, so you have to use ES6&#39;s <code>Number.isNaN(..)</code> (or a polyfill). Similarly, <code>-0</code> lies and pretends that it&#39;s equal (even <code>===</code> strict equal -- see Chapter 4) to regular positive <code>0</code>, so you have to use the somewhat hackish <code>isNegZero(..)</code> utility we suggested above.</p><p>As of ES6, there&#39;s a new utility that can be used to test two values for absolute equality, without any of these exceptions. It&#39;s called <code>Object.is(..)</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">0</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token number">NaN</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> b<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> b<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>There&#39;s a pretty simple polyfill for <code>Object.is(..)</code> for pre-ES6 environments:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>is<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Object<span class="token punctuation">.</span><span class="token function-variable function">is</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v1<span class="token punctuation">,</span> v2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// test for \`-0\`</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> v2 <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> v1 <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> v2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// test for \`NaN\`</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">!==</span> v1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> v2 <span class="token operator">!==</span> v2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// everything else</span>
		<span class="token keyword">return</span> v1 <span class="token operator">===</span> v2<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>Object.is(..)</code> probably shouldn&#39;t be used in cases where <code>==</code> or <code>===</code> are known to be <em>safe</em> (see Chapter 4 &quot;Coercion&quot;), as the operators are likely much more efficient and certainly are more idiomatic/common. <code>Object.is(..)</code> is mostly for these special cases of equality.</p><h2 id="value-vs-reference" tabindex="-1"><a class="header-anchor" href="#value-vs-reference" aria-hidden="true">#</a> Value vs. Reference</h2><p>In many other languages, values can either be assigned/passed by value-copy or by reference-copy depending on the syntax you use.</p><p>For example, in C++ if you want to pass a <code>number</code> variable into a function and have that variable&#39;s value updated, you can declare the function parameter like <code>int&amp; myNum</code>, and when you pass in a variable like <code>x</code>, <code>myNum</code> will be a <strong>reference to <code>x</code></strong>; references are like a special form of pointers, where you obtain a pointer to another variable (like an <em>alias</em>). If you don&#39;t declare a reference parameter, the value passed in will <em>always</em> be copied, even if it&#39;s a complex object.</p><p>In JavaScript, there are no pointers, and references work a bit differently. You cannot have a reference from one JS variable to another variable. That&#39;s just not possible.</p><p>A reference in JS points at a (shared) <strong>value</strong>, so if you have 10 different references, they are all always distinct references to a single shared value; <strong>none of them are references/pointers to each other.</strong></p><p>Moreover, in JavaScript, there are no syntactic hints that control value vs. reference assignment/passing. Instead, the <em>type</em> of the value <em>solely</em> controls whether that value will be assigned by value-copy or by reference-copy.</p><p>Let&#39;s illustrate:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// \`b\` is always a copy of the value in \`a\`</span>
b<span class="token operator">++</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 2</span>
b<span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment">// \`d\` is a reference to the shared \`[1,2,3]\` value</span>
d<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
d<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Simple values (aka scalar primitives) are <em>always</em> assigned/passed by value-copy: <code>null</code>, <code>undefined</code>, <code>string</code>, <code>number</code>, <code>boolean</code>, and ES6&#39;s <code>symbol</code>.</p><p>Compound values -- <code>object</code>s (including <code>array</code>s, and all boxed object wrappers -- see Chapter 3) and <code>function</code>s -- <em>always</em> create a copy of the reference on assignment or passing.</p><p>In the above snippet, because <code>2</code> is a scalar primitive, <code>a</code> holds one initial copy of that value, and <code>b</code> is assigned another <em>copy</em> of the value. When changing <code>b</code>, you are in no way changing the value in <code>a</code>.</p><p>But <strong>both <code>c</code> and <code>d</code></strong> are separate references to the same shared value <code>[1,2,3]</code>, which is a compound value. It&#39;s important to note that neither <code>c</code> nor <code>d</code> more &quot;owns&quot; the <code>[1,2,3]</code> value -- both are just equal peer references to the value. So, when using either reference to modify (<code>.push(4)</code>) the actual shared <code>array</code> value itself, it&#39;s affecting just the one shared value, and both references will reference the newly modified value <code>[1,2,3,4]</code>.</p><p>Since references point to the values themselves and not to the variables, you cannot use one reference to change where another reference is pointed:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>
b<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>

<span class="token comment">// later</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>
b<span class="token punctuation">;</span> <span class="token comment">// [4,5,6]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>When we make the assignment <code>b = [4,5,6]</code>, we are doing absolutely nothing to affect <em>where</em> <code>a</code> is still referencing (<code>[1,2,3]</code>). To do that, <code>b</code> would have to be a pointer to <code>a</code> rather than a reference to the <code>array</code> -- but no such capability exists in JS!</p><p>The most common way such confusion happens is with function parameters:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	x<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>

	<span class="token comment">// later</span>
	x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">7</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	x<span class="token punctuation">;</span> <span class="token comment">// [4,5,6,7]</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]  not  [4,5,6,7]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>When we pass in the argument <code>a</code>, it assigns a copy of the <code>a</code> reference to <code>x</code>. <code>x</code> and <code>a</code> are separate references pointing at the same <code>[1,2,3]</code> value. Now, inside the function, we can use that reference to mutate the value itself (<code>push(4)</code>). But when we make the assignment <code>x = [4,5,6]</code>, this is in no way affecting where the initial reference <code>a</code> is pointing -- still points at the (now modified) <code>[1,2,3,4]</code> value.</p><p>There is no way to use the <code>x</code> reference to change where <code>a</code> is pointing. We could only modify the contents of the shared value that both <code>a</code> and <code>x</code> are pointing to.</p><p>To accomplish changing <code>a</code> to have the <code>[4,5,6,7]</code> value contents, you can&#39;t create a new <code>array</code> and assign -- you must modify the existing <code>array</code> value:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	x<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>

	<span class="token comment">// later</span>
	x<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// empty existing array in-place</span>
	x<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	x<span class="token punctuation">;</span> <span class="token comment">// [4,5,6,7]</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// [4,5,6,7]  not  [1,2,3,4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>As you can see, <code>x.length = 0</code> and <code>x.push(4,5,6,7)</code> were not creating a new <code>array</code>, but modifying the existing shared <code>array</code>. So of course, <code>a</code> references the new <code>[4,5,6,7]</code> contents.</p><p>Remember: you cannot directly control/override value-copy vs. reference -- those semantics are controlled entirely by the type of the underlying value.</p><p>To effectively pass a compound value (like an <code>array</code>) by value-copy, you need to manually make a copy of it, so that the reference passed doesn&#39;t still point to the original. For example:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">foo</span><span class="token punctuation">(</span> a<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>slice(..)</code> with no parameters by default makes an entirely new (shallow) copy of the <code>array</code>. So, we pass in a reference only to the copied <code>array</code>, and thus <code>foo(..)</code> cannot affect the contents of <code>a</code>.</p><p>To do the reverse -- pass a scalar primitive value in a way where its value updates can be seen, kinda like a reference -- you have to wrap the value in another compound value (<code>object</code>, <code>array</code>, etc) that <em>can</em> be passed by reference-copy:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">wrapper</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	wrapper<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span> obj <span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Here, <code>obj</code> acts as a wrapper for the scalar primitive property <code>a</code>. When passed to <code>foo(..)</code>, a copy of the <code>obj</code> reference is passed in and set to the <code>wrapper</code> parameter. We now can use the <code>wrapper</code> reference to access the shared object, and update its property. After the function finishes, <code>obj.a</code> will see the updated value <code>42</code>.</p><p>It may occur to you that if you wanted to pass in a reference to a scalar primitive value like <code>2</code>, you could just box the value in its <code>Number</code> object wrapper (see Chapter 3).</p><p>It <em>is</em> true a copy of the reference to this <code>Number</code> object <em>will</em> be passed to the function, but unfortunately, having a reference to the shared object is not going to give you the ability to modify the shared primitive value, like you may expect:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	x<span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// or equivalently \`Object(a)\`</span>

<span class="token function">foo</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2, not 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The problem is that the underlying scalar primitive value is <em>not mutable</em> (same goes for <code>String</code> and <code>Boolean</code>). If a <code>Number</code> object holds the scalar primitive value <code>2</code>, that exact <code>Number</code> object can never be changed to hold another value; you can only create a whole new <code>Number</code> object with a different value.</p><p>When <code>x</code> is used in the expression <code>x + 1</code>, the underlying scalar primitive value <code>2</code> is unboxed (extracted) from the <code>Number</code> object automatically, so the line <code>x = x + 1</code> very subtly changes <code>x</code> from being a shared reference to the <code>Number</code> object, to just holding the scalar primitive value <code>3</code> as a result of the addition operation <code>2 + 1</code>. Therefore, <code>b</code> on the outside still references the original unmodified/immutable <code>Number</code> object holding the value <code>2</code>.</p><p>You <em>can</em> add properties on top of the <code>Number</code> object (just not change its inner primitive value), so you could exchange information indirectly via those additional properties.</p><p>This is not all that common, however; it probably would not be considered a good practice by most developers.</p><p>Instead of using the wrapper object <code>Number</code> in this way, it&#39;s probably much better to use the manual object wrapper (<code>obj</code>) approach in the earlier snippet. That&#39;s not to say that there&#39;s no clever uses for the boxed object wrappers like <code>Number</code> -- just that you should probably prefer the scalar primitive value form in most cases.</p><p>References are quite powerful, but sometimes they get in your way, and sometimes you need them where they don&#39;t exist. The only control you have over reference vs. value-copy behavior is the type of the value itself, so you must indirectly influence the assignment/passing behavior by which value types you choose to use.</p><h2 id="review" tabindex="-1"><a class="header-anchor" href="#review" aria-hidden="true">#</a> Review</h2><p>In JavaScript, <code>array</code>s are simply numerically indexed collections of any value-type. <code>string</code>s are somewhat &quot;<code>array</code>-like&quot;, but they have distinct behaviors and care must be taken if you want to treat them as <code>array</code>s. Numbers in JavaScript include both &quot;integers&quot; and floating-point values.</p><p>Several special values are defined within the primitive types.</p><p>The <code>null</code> type has just one value: <code>null</code>, and likewise the <code>undefined</code> type has just the <code>undefined</code> value. <code>undefined</code> is basically the default value in any variable or property if no other value is present. The <code>void</code> operator lets you create the <code>undefined</code> value from any other value.</p><p><code>number</code>s include several special values, like <code>NaN</code> (supposedly &quot;Not a Number&quot;, but really more appropriately &quot;invalid number&quot;); <code>+Infinity</code> and <code>-Infinity</code>; and <code>-0</code>.</p><p>Simple scalar primitives (<code>string</code>s, <code>number</code>s, etc.) are assigned/passed by value-copy, but compound values (<code>object</code>s, etc.) are assigned/passed by reference-copy. References are not like references/pointers in other languages -- they&#39;re never pointed at other variables/references, only at the underlying values.</p>`,261);function t(o,p){return e}var r=n(a,[["render",t],["__file","ch2.html.vue"]]);export{r as default};
